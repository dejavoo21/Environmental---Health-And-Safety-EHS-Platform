TC_ID,Category,Feature,Test Case Name,Description,Preconditions,Steps,Expected Result,Priority,Related Story,Capability ID
TC-P5-001,Analytics,KPI Summary,View KPI cards on analytics page,Verify all KPI cards display with correct values,User logged in as manager; incident data exists,1. Navigate to /analytics; 2. Wait for page load; 3. Verify all 6 KPI cards visible,All KPIs display: Total Incidents; % High Severity; Avg Resolution Time; Open Actions; % Overdue; Pass Rate,High,US-AN-03,C-122
TC-P5-002,Analytics,KPI Summary,KPI shows trend indicator,Verify trend arrow displays comparing current vs previous period,Data exists in both current and previous periods,1. Navigate to /analytics; 2. View KPI card trend indicator,Trend arrow (up/down/neutral) displays with percentage change,High,US-AN-03,C-122
TC-P5-003,Analytics,KPI Summary,KPI colour coding - improving,Verify green colour when metric improves,Current period has fewer incidents than previous,1. Navigate to /analytics; 2. View Total Incidents KPI,Trend indicator is green with down arrow,Medium,US-AN-03,C-122
TC-P5-004,Analytics,KPI Summary,KPI colour coding - worsening,Verify red colour when metric worsens,Current period has more incidents than previous,1. Navigate to /analytics; 2. View Total Incidents KPI,Trend indicator is red with up arrow,Medium,US-AN-03,C-122
TC-P5-005,Analytics,KPI Summary,Click KPI navigates to list,Verify clicking KPI card drills down,User on analytics page,1. Click Open Actions KPI card,Navigates to /actions with status=open filter applied,High,US-AN-03,C-132
TC-P5-006,Analytics,Time Series,View incidents over time chart,Verify time-series chart displays monthly incident counts,Incident data spans multiple months,1. Navigate to /analytics; 2. View incidents time-series chart,Bar chart shows incidents per month; hovering shows values,High,US-AN-01,C-120
TC-P5-007,Analytics,Time Series,Incidents stacked by severity,Verify chart stacks by severity level,Incidents with different severities exist,1. Navigate to /analytics; 2. View incidents chart with severity breakdown,Bars show stacked colours for low/medium/high/critical,High,US-AN-01,C-120
TC-P5-008,Analytics,Time Series,Empty months show zero,Verify continuous timeline with zero for empty months,Data exists with gaps between months,1. Navigate to /analytics; 2. View time-series chart,Months with no data show zero (no gaps in timeline),Medium,US-AN-01,C-120
TC-P5-009,Analytics,Time Series,Inspections over time chart,Verify inspection time-series displays,Inspection data exists,1. Navigate to /analytics; 2. View inspections time-series chart,Chart shows completed inspections per month,High,US-AN-01,C-120
TC-P5-010,Analytics,Time Series,Actions created vs completed,Verify actions comparison chart,Action data exists,1. Navigate to /analytics; 2. View actions time-series chart,Chart shows two lines: created and completed per month,High,US-AN-01,C-120
TC-P5-011,Analytics,Site Comparison,View incidents by site chart,Verify site comparison bar chart,Incidents across multiple sites exist,1. Navigate to /analytics; 2. View incidents by site chart,Bar chart shows incident count per site,High,US-AN-02,C-121
TC-P5-012,Analytics,Site Comparison,Sort by value descending,Verify sites sorted by highest count,Multiple sites with varying counts,1. View site comparison chart; 2. Select sort by value,Sites ordered from highest to lowest incident count,Medium,US-AN-02,C-121
TC-P5-013,Analytics,Site Comparison,Max 20 sites displayed,Verify more than 20 sites grouped as Other,More than 20 sites exist,1. View site comparison with 25+ sites,Top 20 shown individually; remainder grouped as Other,Medium,US-AN-02,C-121
TC-P5-014,Analytics,Site Comparison,Overdue actions by site,Verify overdue actions distribution chart,Overdue actions exist,1. Navigate to /analytics; 2. View overdue actions by site chart,Bar chart shows overdue count per site,High,US-AN-02,C-121
TC-P5-015,Analytics,Site Comparison,Inspection pass/fail by site,Verify inspection results by site,Inspections with pass/fail exist,1. View inspection results by site chart,Stacked/grouped bars show pass vs fail per site,High,US-AN-02,C-121
TC-P5-016,Analytics,Filters,Filter by date range preset,Verify preset date range filter works,User on analytics page,1. Select Last 30 Days from date range dropdown; 2. Wait for refresh,All charts and KPIs show only last 30 days data,High,US-AN-04,C-123
TC-P5-017,Analytics,Filters,Filter by custom date range,Verify custom date range selection,User on analytics page,1. Select Custom from date range; 2. Enter start and end dates; 3. Apply,Charts show only data within custom range,High,US-AN-04,C-123
TC-P5-018,Analytics,Filters,Filter by site multi-select,Verify filtering by multiple sites,Multiple sites exist,1. Open site filter; 2. Select 2 sites; 3. Apply,Charts show only data from selected sites,High,US-AN-04,C-123
TC-P5-019,Analytics,Filters,Filter by incident type,Verify incident type filtering,Multiple incident types exist,1. Open incident type filter; 2. Select specific type; 3. Apply,Charts show only incidents of selected type,High,US-AN-04,C-123
TC-P5-020,Analytics,Filters,Filter by severity,Verify severity filtering,Incidents with different severities exist,1. Open severity filter; 2. Select high and critical; 3. Apply,Charts show only high and critical incidents,High,US-AN-04,C-123
TC-P5-021,Analytics,Filters,Clear all filters,Verify clear all resets to defaults,Filters are applied,1. Apply multiple filters; 2. Click Clear All,All filters reset; data shows defaults,Medium,US-AN-04,C-123
TC-P5-022,Analytics,Filters,Filter persistence in session,Verify filters persist during session,User applies filters,1. Apply filters; 2. Navigate to another page; 3. Return to analytics,Previous filters still applied,Medium,US-AN-04,C-123
TC-P5-023,Analytics,Filters,URL updates with filters,Verify shareable URL with filters,User applies filters,1. Apply site and date filters; 2. Copy URL; 3. Open in new tab,New tab shows same filtered view,Medium,US-AN-04,C-123
TC-P5-024,Risk Scoring,Calculation,Risk score formula correct,Verify risk score calculated with correct weights,Site has known incident/action/inspection counts,1. Run risk calculation job; 2. Verify site score,Score = (Crit×10)+(High×5)+(Med×2)+(Low×1)+(Overdue×3)+(Failed×2),High,US-RISK-01,C-124
TC-P5-025,Risk Scoring,Calculation,Risk category - Low,Verify score 0-10 categorised as Low,Site score is 8,1. View site risk score,Category shows Low with green indicator,High,US-RISK-01,C-124
TC-P5-026,Risk Scoring,Calculation,Risk category - Medium,Verify score 11-30 categorised as Medium,Site score is 25,1. View site risk score,Category shows Medium with yellow indicator,High,US-RISK-01,C-124
TC-P5-027,Risk Scoring,Calculation,Risk category - High,Verify score 31-50 categorised as High,Site score is 42,1. View site risk score,Category shows High with orange indicator,High,US-RISK-01,C-124
TC-P5-028,Risk Scoring,Calculation,Risk category - Critical,Verify score 51+ categorised as Critical,Site score is 65,1. View site risk score,Category shows Critical with red indicator,High,US-RISK-01,C-124
TC-P5-029,Risk Scoring,Calculation,90-day rolling window,Verify only last 90 days counted,Incidents exist both inside and outside window,1. Run risk calculation; 2. Verify counts,Only incidents from last 90 days included in score,High,US-RISK-01,C-124
TC-P5-030,Risk Scoring,Calculation,Primary factor identified,Verify primary contributing factor shown,Site has highest score from incidents,1. View site risk details,Primary factor shows incidents as main contributor,Medium,US-RISK-01,C-124
TC-P5-031,Risk Scoring,Widget,Top 5 high-risk sites displayed,Verify top risk sites widget shows 5 sites,Risk scores calculated for 10+ sites,1. Navigate to /analytics; 2. View Top Risk Sites widget,Widget shows top 5 sites by risk score descending,High,US-RISK-02,C-125
TC-P5-032,Risk Scoring,Widget,Risk trend arrow shown,Verify trend indicator on risk widget,Risk history exists,1. View Top Risk Sites widget,Each site shows trend arrow vs previous period,Medium,US-RISK-02,C-125
TC-P5-033,Risk Scoring,Widget,Click site navigates to incidents,Verify drill-down from risk widget,Top risk sites displayed,1. Click on a site in Top Risk widget,Navigates to /incidents filtered by that site,High,US-RISK-02,C-125
TC-P5-034,Risk Scoring,Widget,View All link,Verify full risk ranking accessible,Top risk widget displayed,1. Click View All link on widget,Full page/modal shows all sites ranked by risk,Medium,US-RISK-02,C-125
TC-P5-035,Risk Scoring,Widget,Top incident types displayed,Verify top 5 incident types widget,Incidents of various types exist,1. Navigate to /analytics; 2. View Top Incident Types widget,Shows top 5 types with count and percentage,High,US-RISK-03,C-126
TC-P5-036,Risk Scoring,Widget,Click incident type drills down,Verify drill-down from types widget,Top types displayed,1. Click on an incident type row,Navigates to /incidents filtered by that type,High,US-RISK-03,C-126
TC-P5-037,Risk Scoring,Transparency,Risk score help tooltip,Verify formula explanation available,User viewing risk scores,1. Hover over risk score info icon,Tooltip shows formula explanation,Medium,US-RISK-04,C-127
TC-P5-038,Risk Scoring,Transparency,Score breakdown visible,Verify component breakdown shown,Risk score calculated,1. View site risk details/expand,Shows incident score; action score; inspection score,Medium,US-RISK-04,C-127
TC-P5-039,Saved Views,Create,Save current view,Verify user can save filter configuration,User has filters applied,1. Apply filters; 2. Click Save View; 3. Enter name; 4. Save,View saved and appears in dropdown,High,US-VIEW-01,C-128
TC-P5-040,Saved Views,Create,Save view with description,Verify optional description saved,User saving a view,1. Click Save View; 2. Enter name and description; 3. Save,View saved with description visible in manage views,Medium,US-VIEW-01,C-128
TC-P5-041,Saved Views,Create,Save as shared view,Verify shared view visible to org users,User saves as shared,1. Save view with is_shared=true,Other org users can see and load this view,High,US-VIEW-01,C-128
TC-P5-042,Saved Views,Create,Max 20 views limit,Verify cannot exceed 20 views,User has 20 views already,1. Try to save 21st view,Error message shows maximum reached,Medium,US-VIEW-01,C-128
TC-P5-043,Saved Views,Load,Load saved view from dropdown,Verify loading view applies filters,User has saved views,1. Select view from dropdown,All saved filters applied; charts refresh,High,US-VIEW-02,C-129
TC-P5-044,Saved Views,Load,Load time under 2 seconds,Verify fast view loading,User selects a view,1. Time from click to filter application,View loads in < 2 seconds,Medium,US-VIEW-02,C-129
TC-P5-045,Saved Views,Load,Currently viewing indicator,Verify indicator shows loaded view name,View loaded,1. Load a saved view,Header shows Currently viewing: [View Name],Medium,US-VIEW-02,C-129
TC-P5-046,Saved Views,Load,Modify loaded view without saving,Verify changes don't auto-save,View loaded,1. Load view; 2. Change a filter,Original view unchanged; unsaved indicator shown,Medium,US-VIEW-02,C-129
TC-P5-047,Saved Views,Manage,Rename saved view,Verify renaming a view,User has saved views,1. Open manage views; 2. Rename a view; 3. Save,View name updated in dropdown,Medium,US-VIEW-03,C-130
TC-P5-048,Saved Views,Manage,Update view filters,Verify updating view with new filters,View loaded and modified,1. Load view; 2. Change filters; 3. Click Update View,View now loads with new filters,Medium,US-VIEW-03,C-130
TC-P5-049,Saved Views,Manage,Delete saved view,Verify deleting a view,User has saved views,1. Open manage views; 2. Click delete on a view; 3. Confirm,View removed from dropdown,High,US-VIEW-03,C-130
TC-P5-050,Saved Views,Manage,Delete requires confirmation,Verify confirmation dialog on delete,User clicks delete,1. Click delete view,Confirmation dialog appears before deletion,Medium,US-VIEW-03,C-130
TC-P5-051,Saved Views,Manage,Set view as default,Verify default view auto-loads,User sets a default view,1. Set view as default; 2. Navigate away; 3. Return to analytics,Default view automatically loaded,High,US-VIEW-03,C-130
TC-P5-052,Saved Views,Manage,Only one default allowed,Verify setting new default removes old,User has existing default,1. Set new view as default,Previous default no longer marked; new view is default,Medium,US-VIEW-03,C-130
TC-P5-053,PDF Report,Generate,Generate PDF report,Verify PDF downloads successfully,User on analytics page,1. Click Generate PDF Report; 2. Wait for generation,PDF file downloads,High,US-VIEW-04,C-131
TC-P5-054,PDF Report,Generate,PDF contains cover page,Verify cover page in report,PDF generated,1. Open generated PDF,Cover shows org name; report period; generation date,Medium,US-VIEW-04,C-131
TC-P5-055,PDF Report,Generate,PDF contains KPI summary,Verify executive summary section,PDF generated,1. Open generated PDF,Executive summary shows all KPI values with trends,High,US-VIEW-04,C-131
TC-P5-056,PDF Report,Generate,PDF contains charts,Verify charts rendered in PDF,PDF generated,1. Open generated PDF,Charts rendered as images (incidents over time; site comparison),High,US-VIEW-04,C-131
TC-P5-057,PDF Report,Generate,PDF contains filter summary,Verify applied filters documented,PDF generated with filters applied,1. Open generated PDF,Filter summary section shows what was included,Medium,US-VIEW-04,C-131
TC-P5-058,PDF Report,Generate,Generation within 30 seconds,Verify PDF generates quickly,User clicks generate,1. Time from click to download,PDF ready in < 30 seconds,Medium,US-VIEW-04,C-131
TC-P5-059,PDF Report,Generate,Loading indicator during generation,Verify user sees progress,User clicks generate,1. Click Generate PDF; 2. Observe UI,Loading spinner/indicator visible until ready,Medium,US-VIEW-04,C-131
TC-P5-060,PDF Report,Generate,PDF file size reasonable,Verify file not too large,PDF generated,1. Check file size,File size < 5MB for typical report,Low,US-VIEW-04,C-131
TC-P5-061,Drill-Down,Navigation,Drill from incidents-by-month,Verify clicking bar navigates correctly,Time-series chart displayed,1. Click on a bar segment in incidents chart,Navigates to /incidents?month=YYYY-MM&severity=X,High,US-DRILL-01,C-132
TC-P5-062,Drill-Down,Navigation,Drill from incidents-by-site,Verify site bar drill-down,Site comparison chart displayed,1. Click on a site bar,Navigates to /incidents?siteId=X,High,US-DRILL-01,C-132
TC-P5-063,Drill-Down,Navigation,Drill from actions chart,Verify actions chart drill-down,Actions time-series displayed,1. Click on actions created data point,Navigates to /actions?month=YYYY-MM,High,US-DRILL-01,C-132
TC-P5-064,Drill-Down,Navigation,Date range preserved on drill,Verify date filter carries over,Date range filter applied,1. Set date range; 2. Drill down,Target list has same date range filter,High,US-DRILL-01,C-132
TC-P5-065,Drill-Down,Navigation,Back button returns to analytics,Verify back navigation works,User drilled down from analytics,1. Drill down to list; 2. Click browser back,Returns to analytics with filters intact,Medium,US-DRILL-01,C-132
TC-P5-066,Drill-Down,Navigation,Bookmarkable drill-down URL,Verify URL reflects filters,User drilled down,1. Copy URL after drill-down; 2. Open in new tab,Same filtered list displays,Medium,US-DRILL-01,C-132
TC-P5-067,Drill-Down,UI,Cursor changes on hover,Verify pointer cursor on clickable charts,User viewing charts,1. Hover over a chart bar,Cursor changes to pointer,Medium,US-DRILL-02,C-133
TC-P5-068,Drill-Down,UI,Tooltip shows click hint,Verify Click to view details tooltip,User hovering,1. Hover over clickable element,Tooltip shows Click to view details,Medium,US-DRILL-02,C-133
TC-P5-069,Drill-Down,UI,Visual highlight on hover,Verify hover effect on charts,User hovering,1. Hover over a bar,Bar highlights (colour change or border),Low,US-DRILL-02,C-133
TC-P5-070,Performance,Load Time,Load < 2s for small data,Verify fast load with < 1k incidents,Database has 500 incidents,1. Load analytics page; 2. Measure time,Page fully loaded in < 2 seconds,High,US-PERF-01,C-134
TC-P5-071,Performance,Load Time,Load < 5s for medium data,Verify acceptable load with 1k-10k incidents,Database has 5000 incidents,1. Load analytics page; 2. Measure time,Page fully loaded in < 5 seconds,High,US-PERF-01,C-134
TC-P5-072,Performance,Load Time,Load < 10s for large data,Verify acceptable load with 10k-50k incidents,Database has 30000 incidents,1. Load analytics page; 2. Measure time,Page fully loaded in < 10 seconds,High,US-PERF-01,C-134
TC-P5-073,Performance,Load Time,Loading indicator shown,Verify spinner during load,User opening analytics,1. Navigate to /analytics,Loading spinner visible until charts render,Medium,US-PERF-01,C-134
TC-P5-074,Performance,Aggregation,Nightly aggregation completes,Verify scheduled job success,Aggregation job enabled,1. Wait for 02:00 UTC; 2. Check job logs,Job completes successfully within 30 minutes,High,US-PERF-02,C-135
TC-P5-075,Performance,Aggregation,Hybrid query uses both sources,Verify aggregated + live data merged,Recent and older data exists,1. Query analytics API; 2. Check query plan/results,Data from aggregated table + last 48h from live tables,Medium,US-PERF-02,C-135
TC-P5-076,Security,Isolation,User only sees own org data,Verify multi-tenant isolation,Two orgs with separate data,1. Login as Org A user; 2. View analytics,Only Org A data visible in all charts/KPIs,Critical,US-AN-04,C-123
TC-P5-077,Security,Isolation,Cannot access other org views,Verify saved view isolation,Org B has saved views,1. Login as Org A user; 2. Try to access Org B view by ID,404 or 403 error returned,Critical,US-VIEW-02,C-129
TC-P5-078,Security,Isolation,Cannot access other org risk scores,Verify risk score isolation,Both orgs have calculated scores,1. Login as Org A user; 2. GET risk scores,Only Org A sites returned,Critical,US-RISK-01,C-124
TC-P5-079,Security,Auth,Unauthenticated requests rejected,Verify auth required,No auth token,1. Call /api/analytics/summary without token,401 Unauthorized response,Critical,US-AN-01,C-120
TC-P5-080,Security,Auth,Worker can view analytics,Verify read access for workers,Worker user exists,1. Login as worker; 2. Navigate to analytics,Analytics page accessible (read-only),High,US-AN-01,C-120
TC-P5-081,Accessibility,Keyboard,Navigate filters with keyboard,Verify keyboard accessibility,User on analytics page,1. Tab through filter controls,All filters reachable and usable with keyboard,Medium,US-AN-04,C-123
TC-P5-082,Accessibility,Screen Reader,KPI cards have aria labels,Verify screen reader support,Screen reader active,1. Navigate to KPI cards,Cards announce title; value; and trend,Medium,US-AN-03,C-122
TC-P5-083,Accessibility,Colour,Colour not sole indicator,Verify info not conveyed by colour alone,Colour blind user,1. Review trend indicators,Arrows (up/down) used alongside colours,Medium,US-AN-03,C-122
TC-P5-084,Error Handling,API Error,Handle API timeout gracefully,Verify timeout shows error state,API configured to timeout,1. Trigger API timeout on analytics load,Error message displays; retry option available,Medium,US-AN-01,C-120
TC-P5-085,Error Handling,Empty State,Handle no data gracefully,Verify empty state display,New org with no data,1. Login as user with no incidents,Charts show No data available message,Medium,US-AN-01,C-120
TC-P5-086,Scheduled Jobs,Risk Calc,Risk calculation job runs nightly,Verify 03:00 UTC job execution,Job configured,1. Wait for job time; 2. Verify execution,All site risk scores recalculated,High,US-RISK-01,C-124
TC-P5-087,Scheduled Jobs,History,Risk history retained,Verify historical scores stored,Job has run multiple times,1. Query site_risk_score_history,History records exist for trending,Medium,US-RISK-01,C-124
TC-P5-088,Browser,Compatibility,Works in Chrome,Verify Chrome support,Chrome browser,1. Access analytics in Chrome,All features work correctly,High,US-AN-01,C-120
TC-P5-089,Browser,Compatibility,Works in Firefox,Verify Firefox support,Firefox browser,1. Access analytics in Firefox,All features work correctly,Medium,US-AN-01,C-120
TC-P5-090,Browser,Compatibility,Works in Edge,Verify Edge support,Edge browser,1. Access analytics in Edge,All features work correctly,Medium,US-AN-01,C-120
TC-P5-091,Responsive,Mobile,Dashboard readable on mobile,Verify mobile responsiveness,Mobile device/viewport,1. Access analytics on 375px width,Charts and KPIs readable; may stack vertically,Medium,US-AN-01,C-120
TC-P5-092,Responsive,Tablet,Dashboard usable on tablet,Verify tablet layout,Tablet viewport (768px),1. Access analytics on tablet,Layout adapts appropriately,Medium,US-AN-01,C-120
